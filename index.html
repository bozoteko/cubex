<div class="icat-embed-element" style="width:100%;height:100%;"><icat-app id="icat-59147e527b5b51f8d01fb4d13"></icat-app></div><script type="text/javascript">!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e={exports:{}};e.exports=function(){const{entries:e,setPrototypeOf:t,isFrozen:i,getPrototypeOf:n,getOwnPropertyDescriptor:a}=Object;let{freeze:s,seal:o,create:r}=Object,{apply:l,construct:d}="undefined"!=typeof Reflect&&Reflect;s||(s=function(e){return e}),o||(o=function(e){return e}),l||(l=function(e,t,i){return e.apply(t,i)}),d||(d=function(e,t){return new e(...t)});const c=w(Array.prototype.forEach),h=w(Array.prototype.pop),u=w(Array.prototype.push),m=w(String.prototype.toLowerCase),p=w(String.prototype.toString),g=w(String.prototype.match),b=w(String.prototype.replace),v=w(String.prototype.indexOf),f=w(String.prototype.trim),y=w(RegExp.prototype.test),x=k(TypeError);function w(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return l(e,t,n)}}function k(e){return function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return d(e,i)}}function z(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;t&&t(e,null);let s=n.length;for(;s--;){let t=n[s];if("string"==typeof t){const e=a(t);e!==t&&(i(n)||(n[s]=e),t=e)}e[t]=!0}return e}function S(t){const i=r(null);for(const[n,s]of e(t))void 0!==a(t,n)&&(i[n]=s);return i}function M(e,t){for(;null!==e;){const i=a(e,t);if(i){if(i.get)return w(i.get);if("function"==typeof i.value)return w(i.value)}e=n(e)}function i(e){return console.warn("fallback value for",e),null}return i}const C=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),j=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),E=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),I=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),T=s(["#text"]),P=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),F=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),A=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),R=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),G=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),B=o(/<%[\w\W]*|[\w\W]*%>/gm),V=o(/\${[\w\W]*}/gm),N=o(/^data-[\-\w.\u00B7-\uFFFF]/),D=o(/^aria-[\-\w]+$/),O=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=o(/^(?:\w+script|data):/i),$=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),U=o(/^html$/i);var W=Object.freeze({__proto__:null,MUSTACHE_EXPR:G,ERB_EXPR:B,TMPLIT_EXPR:V,DATA_ATTR:N,ARIA_ATTR:D,IS_ALLOWED_URI:O,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:$,DOCTYPE_NAME:U});const K=function(){return"undefined"==typeof window?null:window},q=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let i=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(i=t.getAttribute(n));const a="dompurify"+(i?"#"+i:"");try{return e.createPolicy(a,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function Z(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();const i=e=>Z(e);if(i.version="3.0.6",i.removed=[],!t||!t.document||9!==t.document.nodeType)return i.isSupported=!1,i;let{document:n}=t;const a=n,o=a.currentScript,{DocumentFragment:l,HTMLTemplateElement:d,Node:w,Element:k,NodeFilter:G,NamedNodeMap:B=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:V,DOMParser:N,trustedTypes:D}=t,H=k.prototype,$=M(H,"cloneNode"),Y=M(H,"nextSibling"),X=M(H,"childNodes"),J=M(H,"parentNode");if("function"==typeof d){const e=n.createElement("template");e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let Q,ee="";const{implementation:te,createNodeIterator:ie,createDocumentFragment:ne,getElementsByTagName:ae}=n,{importNode:se}=a;let oe={};i.isSupported="function"==typeof e&&"function"==typeof J&&te&&void 0!==te.createHTMLDocument;const{MUSTACHE_EXPR:re,ERB_EXPR:le,TMPLIT_EXPR:de,DATA_ATTR:ce,ARIA_ATTR:he,IS_SCRIPT_OR_DATA:ue,ATTR_WHITESPACE:me}=W;let{IS_ALLOWED_URI:pe}=W,ge=null;const be=z({},[...C,...j,...L,..._,...T]);let ve=null;const fe=z({},[...P,...F,...A,...R]);let ye=Object.seal(r(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xe=null,we=null,ke=!0,ze=!0,Se=!1,Me=!0,Ce=!1,je=!1,Le=!1,Ee=!1,_e=!1,Ie=!1,Te=!1,Pe=!0,Fe=!1;const Ae="user-content-";let Re=!0,Ge=!1,Be={},Ve=null;const Ne=z({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let De=null;const Oe=z({},["audio","video","img","source","image","track"]);let He=null;const $e=z({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ue="http://www.w3.org/1998/Math/MathML",We="http://www.w3.org/2000/svg",Ke="http://www.w3.org/1999/xhtml";let qe=Ke,Ze=!1,Ye=null;const Xe=z({},[Ue,We,Ke],p);let Je=null;const Qe=["application/xhtml+xml","text/html"],et="text/html";let tt=null,it=null;const nt=n.createElement("form"),at=function(e){return e instanceof RegExp||e instanceof Function},st=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!it||it!==e){if(e&&"object"==typeof e||(e={}),e=S(e),Je=Je=-1===Qe.indexOf(e.PARSER_MEDIA_TYPE)?et:e.PARSER_MEDIA_TYPE,tt="application/xhtml+xml"===Je?p:m,ge="ALLOWED_TAGS"in e?z({},e.ALLOWED_TAGS,tt):be,ve="ALLOWED_ATTR"in e?z({},e.ALLOWED_ATTR,tt):fe,Ye="ALLOWED_NAMESPACES"in e?z({},e.ALLOWED_NAMESPACES,p):Xe,He="ADD_URI_SAFE_ATTR"in e?z(S($e),e.ADD_URI_SAFE_ATTR,tt):$e,De="ADD_DATA_URI_TAGS"in e?z(S(Oe),e.ADD_DATA_URI_TAGS,tt):Oe,Ve="FORBID_CONTENTS"in e?z({},e.FORBID_CONTENTS,tt):Ne,xe="FORBID_TAGS"in e?z({},e.FORBID_TAGS,tt):{},we="FORBID_ATTR"in e?z({},e.FORBID_ATTR,tt):{},Be="USE_PROFILES"in e&&e.USE_PROFILES,ke=!1!==e.ALLOW_ARIA_ATTR,ze=!1!==e.ALLOW_DATA_ATTR,Se=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Me=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ce=e.SAFE_FOR_TEMPLATES||!1,je=e.WHOLE_DOCUMENT||!1,_e=e.RETURN_DOM||!1,Ie=e.RETURN_DOM_FRAGMENT||!1,Te=e.RETURN_TRUSTED_TYPE||!1,Ee=e.FORCE_BODY||!1,Pe=!1!==e.SANITIZE_DOM,Fe=e.SANITIZE_NAMED_PROPS||!1,Re=!1!==e.KEEP_CONTENT,Ge=e.IN_PLACE||!1,pe=e.ALLOWED_URI_REGEXP||O,qe=e.NAMESPACE||Ke,ye=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&at(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ye.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&at(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ye.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ye.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ce&&(ze=!1),Ie&&(_e=!0),Be&&(ge=z({},[...T]),ve=[],!0===Be.html&&(z(ge,C),z(ve,P)),!0===Be.svg&&(z(ge,j),z(ve,F),z(ve,R)),!0===Be.svgFilters&&(z(ge,L),z(ve,F),z(ve,R)),!0===Be.mathMl&&(z(ge,_),z(ve,A),z(ve,R))),e.ADD_TAGS&&(ge===be&&(ge=S(ge)),z(ge,e.ADD_TAGS,tt)),e.ADD_ATTR&&(ve===fe&&(ve=S(ve)),z(ve,e.ADD_ATTR,tt)),e.ADD_URI_SAFE_ATTR&&z(He,e.ADD_URI_SAFE_ATTR,tt),e.FORBID_CONTENTS&&(Ve===Ne&&(Ve=S(Ve)),z(Ve,e.FORBID_CONTENTS,tt)),Re&&(ge["#text"]=!0),je&&z(ge,["html","head","body"]),ge.table&&(z(ge,["tbody"]),delete xe.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Q=e.TRUSTED_TYPES_POLICY,ee=Q.createHTML("")}else void 0===Q&&(Q=q(D,o)),null!==Q&&"string"==typeof ee&&(ee=Q.createHTML(""));s&&s(e),it=e}},ot=z({},["mi","mo","mn","ms","mtext"]),rt=z({},["foreignobject","desc","title","annotation-xml"]),lt=z({},["title","style","font","a","script"]),dt=z({},j);z(dt,L),z(dt,E);const ct=z({},_);z(ct,I);const ht=function(e){let t=J(e);t&&t.tagName||(t={namespaceURI:qe,tagName:"template"});const i=m(e.tagName),n=m(t.tagName);return!!Ye[e.namespaceURI]&&(e.namespaceURI===We?t.namespaceURI===Ke?"svg"===i:t.namespaceURI===Ue?"svg"===i&&("annotation-xml"===n||ot[n]):Boolean(dt[i]):e.namespaceURI===Ue?t.namespaceURI===Ke?"math"===i:t.namespaceURI===We?"math"===i&&rt[n]:Boolean(ct[i]):e.namespaceURI===Ke?!(t.namespaceURI===We&&!rt[n])&&!(t.namespaceURI===Ue&&!ot[n])&&!ct[i]&&(lt[i]||!dt[i]):!("application/xhtml+xml"!==Je||!Ye[e.namespaceURI]))},ut=function(e){u(i.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},mt=function(e,t){try{u(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){u(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!ve[e])if(_e||Ie)try{ut(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},pt=function(e){let t=null,i=null;if(Ee)e="<remove></remove>"+e;else{const t=g(e,/^[\r\n\t ]+/);i=t&&t[0]}"application/xhtml+xml"===Je&&qe===Ke&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const a=Q?Q.createHTML(e):e;if(qe===Ke)try{t=(new N).parseFromString(a,Je)}catch(e){}if(!t||!t.documentElement){t=te.createDocument(qe,"template",null);try{t.documentElement.innerHTML=Ze?ee:a}catch(e){}}const s=t.body||t.documentElement;return e&&i&&s.insertBefore(n.createTextNode(i),s.childNodes[0]||null),qe===Ke?ae.call(t,je?"html":"body")[0]:je?t.documentElement:s},gt=function(e){return ie.call(e.ownerDocument||e,e,G.SHOW_ELEMENT|G.SHOW_COMMENT|G.SHOW_TEXT,null)},bt=function(e){return e instanceof V&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof B)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},vt=function(e){return"function"==typeof w&&e instanceof w},ft=function(e,t,n){oe[e]&&c(oe[e],(e=>{e.call(i,t,n,it)}))},yt=function(e){let t=null;if(ft("beforeSanitizeElements",e,null),bt(e))return ut(e),!0;const n=tt(e.nodeName);if(ft("uponSanitizeElement",e,{tagName:n,allowedTags:ge}),e.hasChildNodes()&&!vt(e.firstElementChild)&&y(/<[/\w]/g,e.innerHTML)&&y(/<[/\w]/g,e.textContent))return ut(e),!0;if(!ge[n]||xe[n]){if(!xe[n]&&wt(n)){if(ye.tagNameCheck instanceof RegExp&&y(ye.tagNameCheck,n))return!1;if(ye.tagNameCheck instanceof Function&&ye.tagNameCheck(n))return!1}if(Re&&!Ve[n]){const t=J(e)||e.parentNode,i=X(e)||e.childNodes;if(i&&t)for(let n=i.length-1;n>=0;--n)t.insertBefore($(i[n],!0),Y(e))}return ut(e),!0}return e instanceof k&&!ht(e)?(ut(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!y(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ce&&3===e.nodeType&&(t=e.textContent,c([re,le,de],(e=>{t=b(t,e," ")})),e.textContent!==t&&(u(i.removed,{element:e.cloneNode()}),e.textContent=t)),ft("afterSanitizeElements",e,null),!1):(ut(e),!0)},xt=function(e,t,i){if(Pe&&("id"===t||"name"===t)&&(i in n||i in nt))return!1;if(ze&&!we[t]&&y(ce,t));else if(ke&&y(he,t));else if(!ve[t]||we[t]){if(!(wt(e)&&(ye.tagNameCheck instanceof RegExp&&y(ye.tagNameCheck,e)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(e))&&(ye.attributeNameCheck instanceof RegExp&&y(ye.attributeNameCheck,t)||ye.attributeNameCheck instanceof Function&&ye.attributeNameCheck(t))||"is"===t&&ye.allowCustomizedBuiltInElements&&(ye.tagNameCheck instanceof RegExp&&y(ye.tagNameCheck,i)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(i))))return!1}else if(He[t]);else if(y(pe,b(i,me,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(i,"data:")||!De[e])if(Se&&!y(ue,b(i,me,"")));else if(i)return!1;return!0},wt=function(e){return e.indexOf("-")>0},kt=function(e){ft("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ve};let a=t.length;for(;a--;){const s=t[a],{name:o,namespaceURI:r,value:l}=s,d=tt(o);let u="value"===o?l:f(l);if(n.attrName=d,n.attrValue=u,n.keepAttr=!0,n.forceKeepAttr=void 0,ft("uponSanitizeAttribute",e,n),u=n.attrValue,n.forceKeepAttr)continue;if(mt(o,e),!n.keepAttr)continue;if(!Me&&y(/\/>/i,u)){mt(o,e);continue}Ce&&c([re,le,de],(e=>{u=b(u,e," ")}));const m=tt(e.nodeName);if(xt(m,d,u)){if(!Fe||"id"!==d&&"name"!==d||(mt(o,e),u=Ae+u),Q&&"object"==typeof D&&"function"==typeof D.getAttributeType)if(r);else switch(D.getAttributeType(m,d)){case"TrustedHTML":u=Q.createHTML(u);break;case"TrustedScriptURL":u=Q.createScriptURL(u)}try{r?e.setAttributeNS(r,o,u):e.setAttribute(o,u),h(i.removed)}catch(e){}}}ft("afterSanitizeAttributes",e,null)},zt=function e(t){let i=null;const n=gt(t);for(ft("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)ft("uponSanitizeShadowNode",i,null),yt(i)||(i.content instanceof l&&e(i.content),kt(i));ft("afterSanitizeShadowDOM",t,null)};return i.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,s=null,o=null,r=null;if(Ze=!e,Ze&&(e="\x3c!--\x3e"),"string"!=typeof e&&!vt(e)){if("function"!=typeof e.toString)throw x("toString is not a function");if("string"!=typeof(e=e.toString()))throw x("dirty is not a string, aborting")}if(!i.isSupported)return e;if(Le||st(t),i.removed=[],"string"==typeof e&&(Ge=!1),Ge){if(e.nodeName){const t=tt(e.nodeName);if(!ge[t]||xe[t])throw x("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof w)n=pt("\x3c!----\x3e"),s=n.ownerDocument.importNode(e,!0),1===s.nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?n=s:n.appendChild(s);else{if(!_e&&!Ce&&!je&&-1===e.indexOf("<"))return Q&&Te?Q.createHTML(e):e;if(n=pt(e),!n)return _e?null:Te?ee:""}n&&Ee&&ut(n.firstChild);const d=gt(Ge?e:n);for(;o=d.nextNode();)yt(o)||(o.content instanceof l&&zt(o.content),kt(o));if(Ge)return e;if(_e){if(Ie)for(r=ne.call(n.ownerDocument);n.firstChild;)r.appendChild(n.firstChild);else r=n;return(ve.shadowroot||ve.shadowrootmode)&&(r=se.call(a,r,!0)),r}let h=je?n.outerHTML:n.innerHTML;return je&&ge["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&y(U,n.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+h),Ce&&c([re,le,de],(e=>{h=b(h,e," ")})),Q&&Te?Q.createHTML(h):h},i.setConfig=function(){st(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Le=!0},i.clearConfig=function(){it=null,Le=!1},i.isValidAttribute=function(e,t,i){it||st({});const n=tt(e),a=tt(t);return xt(n,a,i)},i.addHook=function(e,t){"function"==typeof t&&(oe[e]=oe[e]||[],u(oe[e],t))},i.removeHook=function(e){if(oe[e])return h(oe[e])},i.removeHooks=function(e){oe[e]&&(oe[e]=[])},i.removeAllHooks=function(){oe={}},i}var Y=Z();return Y}();var t=e.exports;function i(e,t){e&&(e.shadowRoot?(e.shadowRoot.innerHTML="",e.shadowRoot.appendChild(document.importNode(t.content,!0))):e.attachShadow({mode:"open"}).appendChild(document.importNode(t.content,!0)))}function n({tag:e="",properties:t={},attributes:i={},children:n=[],events:a={}}){if(!e)return;const s=document.createElement(e);return Object.keys(t).forEach((e=>{s[`${e}`]=t[`${e}`]})),Object.keys(i).forEach((e=>s.setAttribute(e,i[`${e}`]))),Object.keys(a).forEach((e=>s.addEventListener(e,a[`${e}`]))),n.forEach((e=>s.appendChild(e))),s}function a(e="<div></div>",t=""){const i=document.createElement("template");return i.innerHTML=e,t&&i.content.appendChild(n({tag:"style",properties:{innerHTML:t}})),i}function s(e,t){customElements.get(e)||customElements.define(e,t)}const o="undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0,r=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,l={isElectron:o,iOS:r,electronUrlPrefix:"icat://localhost/?src=",pathFromElectronUrl:(e="")=>e?decodeURIComponent(e.replace(l.electronUrlPrefix,"").replace("icat://localhost?src=","")):"",pathToElectronUrl:e=>`${l.electronUrlPrefix}${encodeURIComponent(e)}`,clearCache:()=>{window.NvCompareApi&&window.NvCompareApi.clearCache()},clearUrl:e=>{if(!o)try{URL.revokeObjectURL(e)}catch(e){}l.clearCache()},clearedUrl:e=>l.isObjectUrl(e)?(l.clearUrl(e),""):e,isObjectUrl:e=>!!e&&"blob:"===e.slice(0,5),isElectronUrl:e=>!!e&&"icat://localhost"===e.slice(0,16),getUrl:(e,t)=>{if(o&&t&&"string"==typeof t){const e=t.slice(0,5);return"data:"===e||"http:"===e||"blob:"===e||"https:"===t.slice(0,6)||l.isElectronUrl(t)?t:l.pathToElectronUrl(t)}return o&&e&&e.path?l.pathToElectronUrl(e.path):e&&e instanceof File?URL.createObjectURL(e):t},saveProject:async e=>o?window.NvCompareApi.saveProject(e):Promise.reject(),openProject:()=>o?window.NvCompareApi.openProject():Promise.reject(),logError:e=>{if(console.warn("logError",e),o)try{window.NvCompareApi.logError(JSON.stringify([e]))}catch(e){}},openLink:(e,t)=>{if(o)return t&&t.preventDefault(),window.NvCompareApi.openLink(e)}};let d=0;function c(e){return`${performance.now()}xxxxxxxxxxxxxxxx`.replace(/[x]|\./g,(()=>(16*Math.random()|0).toString(16)))+e}function h(){return d+=1,c(d)}const u=["auto","webgpu","webgl","2d"],m=["mp4","mkv","webm","ogg"],p=["jpeg","jpg","png","webp","bmp"],g=["pfm","exr"],b=m.concat(p,g).map((e=>`.${e}`)),v=b.map((e=>e.slice(1))),f=p.map((e=>`.${e}`)),y=["tile","split"],x=(e,t,i)=>new Promise(((n,a)=>{const s=new Image;s.onerror=()=>{s.onerror=null,s.onload=null,a(`Error loading ${t||e}`)},s.onload=()=>{s.onerror=null,s.onload=null,n({metadata:{fps:0,codec:i.toUpperCase(),bitrate:0,duration:0,hasAudio:!1,height:s.naturalHeight,width:s.naturalWidth,timestamps:[]},element:s})},s.src=e}));class w{buffer;bitSize=0;bitPointer=0;bytePointer=0;offset=0;view;littleEndian=!1;constructor(e,t={offset:0,littleEndian:!0}){this.buffer=e,this.bitSize=8*e.byteLength,this.offset=void 0===t.offset?0:t.offset,this.littleEndian=void 0===t||void 0===t.littleEndian||t.littleEndian,this.view=new DataView(this.buffer,t.offset)}shrinkWrap(){let e=this.bytePointer+(this.bitPointer>0?1:0),t=new Uint8Array(new ArrayBuffer(e));for(let i=0;i<e;i++)t[i]=this.view.getUint8(i);this.bitSize=8*e,this.buffer=t.buffer}consume(e,t){for(let i=0;i<t;i++)this.writeUint8(e.readUint8())}copyArray(e,t=0,i=e.length){for(let n=0;n<i;n++)this.writeUint8(e[t+n])}copy(e,t=0,i=e.buffer.byteLength){for(let n=0;n<i;n++)this.setUint8(t+n,e.getUint8(n))}byteAlign(){this.bitPointer>0&&(this.bitPointer=0,this.bytePointer++)}remainingBits(){return this.bitSize-(8*this.bytePointer+this.bitPointer)}readBits(e,t=!1){let i=0,n=e,a=this.bytePointer,s=this.bitPointer,o=this.remainingBits();n>o&&(n=o);let r=s+n,l=Math.min(r-1,7);for(i=w.bits(this.view.getUint8(a,this.littleEndian),l,s),n-=l-s+1,s=r,r>7&&(s=0,a++);n>8;)i|=this.view.getUint8(a,this.littleEndian)<<e-n,a++,n-=8;return n>0&&(i|=(this.view.getUint8(a,this.littleEndian)&(1<<n)-1)<<e-n,s+=n),t||(this.bytePointer=a,this.bitPointer=s),i}seek(e,t=0){this.bytePointer=e,this.bitPointer=t}skip(e=1,t=0){this.bitPointer+=8*e+t,this.bytePointer+=Math.floor(this.bitPointer/8),this.bitPointer%=8}static bits(e,t,i){return(e&(1<<t+1)-1)>>i}static halfBytes2Float32(e){var t=32768&e?-1:1,i=(e>>10&31)-15,n=1023&e;if(16==i)return t*(n?Number.NaN:Number.POSITIVE_INFINITY);if(-16==i){if(0==n)return 0*t;i=-16,n/=1<<22}else n=(1024|n)/1024;return t*n*Math.pow(2,i)}static floatBytes2Float32(e){var t=2147483648&e?-1:1,i=(e>>23&255)-127,n=8388607&e;if(128==i)return t*(n?Number.NaN:Number.POSITIVE_INFINITY);if(-127==i){if(0==n)return 0*t;i=-126,n/=1<<22}else n=(n|1<<23)/(1<<23);return t*n*Math.pow(2,i)}peekUint8(e=this.bytePointer){return this.view.getUint8(e)}readUint8(){return this.view.getUint8(this.bytePointer++)}writeUint8(e){this.view.setUint8(this.bytePointer++,e)}getUint8(e){return this.view.getUint8(e)}setUint8(e,t){this.view.setUint8(e,t)}getInt8(e){return this.view.getInt8(e)}peekUint16(e=this.bytePointer){return this.view.getUint16(e,this.littleEndian)}readUint16(){let e=this.view.getUint16(this.bytePointer,this.littleEndian);return this.bytePointer+=2,e}writeUint16(e){this.view.setUint16(this.bytePointer,e,this.littleEndian),this.bytePointer+=2}getUint16(e){return this.view.getUint16(e,this.littleEndian)}setUint16(e,t){this.view.setUint16(e,t,this.littleEndian)}readUint32(){let e=this.view.getUint32(this.bytePointer,this.littleEndian);return this.bytePointer+=4,e}writeUint32(e){this.view.setUint32(this.bytePointer,e,this.littleEndian),this.bytePointer+=4}writeInt32(e){this.view.setInt32(this.bytePointer,e,this.littleEndian),this.bytePointer+=4}readInt32(){let e=this.view.getInt32(this.bytePointer,this.littleEndian);return this.bytePointer+=4,e}getUint32(e){return this.view.getUint32(e,this.littleEndian)}setUint32(e,t){this.view.setUint32(e,t,this.littleEndian)}readUint64(){let e=this.view.getBigUint64(this.bytePointer,this.littleEndian);return this.bytePointer+=8,e}readFloat32(){let e=this.view.getFloat32(this.bytePointer,this.littleEndian);return this.bytePointer+=4,e}writeFloat32(e){this.view.setFloat32(this.bytePointer,e,this.littleEndian),this.bytePointer+=4}getFloat32(e){return this.view.getFloat32(e,this.littleEndian)}setFloat32(e,t){this.view.setFloat32(e,t,this.littleEndian)}readFloat16(e=this.bytePointer){let t=w.halfBytes2Float32(this.view.getUint16(e,this.littleEndian));return this.bytePointer+=2,t}getFloat16(e){let t=this.view.getUint16(e,this.littleEndian);return w.halfBytes2Float32(t)}readString(){let e=this.readUint8(),t="";for(;0!=e;)t+=String.fromCharCode(e),e=this.readUint8();return t}writeString(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t))}readLine(){let e=String.fromCharCode(this.readUint8()),t="";for(;"\n"!=e&&"\r"!=e;)t+=e,e=String.fromCharCode(this.readUint8());return t}}const k=10,z=1024,S=[257,1,4],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];class _{bSuccess=!0;buffer;outputBuffer;attributes={};offsetTable=[];scanLinesPerChunk=1;pixelSize=0;channelOffsets=[];dimensions={w:0,h:0};huffman={tableSizes:new Array(3).fill(0),lengthCodes:new Array(457).fill(0),tables:[]};constructor(e){this.buffer=new w(e);let t=this.buffer;for(t.readInt32(),t.readInt32();0!=t.peekUint8();){let e=this.readAttribute();this.attributes[e.name]=e}t.skip();let i=this.attributes.dataWindow.values,n=i.yMax-i.yMin+1,a=this.attributes.compression.value;if(0!==a&&3!==a)return console.warn("EXR compression method not implemented!"),void(this.bSuccess=!1);3===a&&(this.scanLinesPerChunk=16),0!==a&&(n=Math.floor(n/this.scanLinesPerChunk)+(n%this.scanLinesPerChunk>0?1:0));for(let e=0;e<n;e++){let i=t.readUint64();this.offsetTable.push({offset:i}),e>0&&(this.offsetTable[e-1].size=i-this.offsetTable[e-1].offset)}n>1&&(this.offsetTable[n-1].size=(t.bitSize>>3)-Number(this.offsetTable[n-1].offset));for(let e=0;e<this.attributes.channels.values.length;e++){let t=this.attributes.channels.values[e];switch(this.channelOffsets.push(this.pixelSize),t.pixelType){case 0:case 2:default:this.pixelSize+=4;break;case 1:this.pixelSize+=2}}let s=this.attributes.dataWindow.values;this.dimensions.w=s.xMax-s.xMin+1,this.dimensions.h=s.yMax-s.yMin+1;let o=this.dimensions.w*this.dimensions.h*this.pixelSize;this.outputBuffer=new w(new ArrayBuffer(o));let r=this.attributes.channels.values;if(0!=a)if(3!==a);else{for(let e=0;e<3;e++)this.huffman.tables.push({codeSize:new Array(288).fill(0),lookUp:new Array(z).fill(0),tree:new Array(576).fill(0)});for(let e=0;e<n;e++){t.seek(Number(this.offsetTable[e].offset)),t.readUint32(),t.readUint32();const i={};let n=t.readUint8(),a=t.readUint8();i.cmf={},i.cmf.cm=w.bits(n,3,0),i.cmf.info=w.bits(n,7,4),i.flg={},i.flg.fcheck=w.bits(a,4,0),i.flg.fdict=w.bits(a,5,5),i.flg.flevel=w.bits(a,7,6),i.dictId=1==i.flg.fdict?t.readUint32():void 0;let s=!1;do{s=1==t.readBits(1);let e=t.readBits(2);if(0==e){t.byteAlign();let e=t.readBits(8)|t.readBits(8)<<8;e!=(65535^(t.readBits(8)|t.readBits(8)<<8))&&console.warn("ERROR: Raw block header LEN/NLEN mismatch!"),this.outputBuffer.consume(t,e);continue}3==e&&console.warn("ERROR: Reserved block type (3)");let i=0;if(1==e||2==e){for(let e=0;e<3;e++)this.huffman.tables[e].codeSize.fill(0),this.huffman.tables[e].lookUp.fill(0),this.huffman.tables[e].tree.fill(0);if(1==e)console.warn("TODO: handle blocks compressed with fixed Huffman codes");else{this.huffman.tableSizes=[t.readBits(5)+S[0],t.readBits(5)+S[1],t.readBits(4)+S[2]];for(let e=0;e<this.huffman.tableSizes[2];e++)this.huffman.tables[2].codeSize[M[e]]=t.readBits(3);this.huffman.tableSizes[2]=19}let n=new Array(17),a=new Array(16);for(let s=e;s>=0;s--){let e=this.huffman.tables[s];a.fill(0);for(let t=0;t<this.huffman.tableSizes[s];t++)a[e.codeSize[t]]++;let o=0,r=0;n[0]=0,n[1]=0;for(let e=1;e<=15;e++)r+=a[e],o=o+a[e]<<1,n[e+1]=o;65536!=o&&r>1&&console.warn("ERROR: Huffman table generation (1)");let l=-1;for(let t=0;t<this.huffman.tableSizes[s];t++){let i=e.codeSize[t];if(0==i)continue;let a=n[i]++,s=0;for(let e=i;e>0;e--)s=s<<1|1&a,a>>=1;if(i<=k){let n=i<<9|t;for(;s<z;)e.lookUp[s]=n,s+=1<<i;continue}let o=e.lookUp[1023&s];0==o&&(e.lookUp[1023&s]=l,o=l,l-=2),s>>=9;for(let t=i;t>11;t--)o-=1&(s>>=1),e.tree[-o-1]?o=e.tree[-o-1]:(e.tree[-o-1]=l,o=l,l-=2);o-=1&(s>>=1),e.tree[-o-1]=t}if(2==s){let e=0;for(i=0;i<this.huffman.tableSizes[0]+this.huffman.tableSizes[1];){if(e=this.huffmanDecode(t,2),e<16){this.huffman.lengthCodes[i++]=e;continue}16!=e||i||console.warn("ERROR: Huffman table generation (2)");let n=[2,3,7][e-16],a=t.readBits(n);a+=[3,3,11][e-16];for(let t=0;t<a;t++)this.huffman.lengthCodes[i+t]=16==e?this.huffman.lengthCodes[i-1]:0;i+=a}this.huffman.tableSizes[0]+this.huffman.tableSizes[1]!=i&&console.warn("ERROR: Huffman table generation (3)"),this.huffman.tables[0].codeSize=this.huffman.lengthCodes.slice(0,this.huffman.tableSizes[0]),this.huffman.tables[1].codeSize=this.huffman.lengthCodes.slice(this.huffman.tableSizes[0],this.huffman.tableSizes[0]+this.huffman.tableSizes[1])}}}for(;;){for(;;)if(t.remainingBits()<32||this.outputBuffer.remainingBits()<16){if(i=this.huffmanDecode(t,0),i>=256)break;this.outputBuffer.bytePointer>=this.outputBuffer.buffer.byteLength&&console.warn("Attempting to write outside output buffer!"),this.outputBuffer.writeUint8(i)}else{let e=this.huffmanDecode(t,0,!0);if(i=e,256&i)break;if(e=this.huffmanDecode(t,0,!0),this.outputBuffer.writeUint8(255&i),256&e){i=e;break}this.outputBuffer.writeUint8(255&e)}if(256==(i&=511))break;let e=j[i-257];if(i=C[i-257],e){i+=t.readBits(e)}let n=this.huffmanDecode(t,1);if(e=E[n],n=L[n],e>0){n+=t.readBits(e)}let a=this.outputBuffer.bytePointer,s=a-n;if(Math.max(this.outputBuffer.bytePointer,s)>this.outputBuffer.buffer.byteLength-1)for(;i--;)this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(a-n)),a++;else{t.remainingBits();do{this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(s+0)),this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(s+1)),this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(s+2)),s+=3}while((i-=3)>2);i>0&&(this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(s)),i>1&&this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(s+1)))}}}while(!s)}let e=Math.round(this.dimensions.h/this.scanLinesPerChunk),i=this.dimensions.h%this.scanLinesPerChunk*this.dimensions.w*this.pixelSize,a=this.scanLinesPerChunk*this.dimensions.w*this.pixelSize,s=new w(new ArrayBuffer(a));for(let t=0;t<e;t++){let n=t*a,o=t==e-1&&i>0?i:a,r=Math.floor((o+1)/2);for(let e=n+1;e<n+o;e++){let t=this.outputBuffer.getUint8(e-1)+this.outputBuffer.getUint8(e)-128;this.outputBuffer.setUint8(e,t)}let l=n;for(let e=0;e<o;e+=2){let t=this.outputBuffer.getUint8(l),i=this.outputBuffer.getUint8(l+r);s.setUint8(e,t),s.setUint8(e+1,i),l++}this.outputBuffer.copy(s,n,o)}}else for(let e=0;e<n;e++){t.seek(Number(this.offsetTable[e].offset)),t.readUint32(),t.readUint32();for(let e=0;e<r.length;e++){let i=r[e];for(let e=0;e<this.dimensions.w;e++)(0==i.pixelType||2==i.pixelType||1==i.pixelType)&&this.outputBuffer.writeUint16(t.readUint16())}}}huffmanDecode(e,t,i=!1){let n=this.huffman.tables[t],a=0;e.remainingBits();let s=e.readBits(k,!0),o=n.lookUp[s];if(o>=0)a=o>>9,i||(o&=511);else{a=k,s=e.readBits(15,!0);do{o=n.tree[~o+(s>>a++&1)]}while(o<0)}let r=o;return e.skip(0,a),r}readAttribute(){let e=this.buffer;const t={name:e.readString(),type:e.readString(),size:e.readInt32()};if("box2i"==t.type&&(t.values={xMin:e.readInt32(),yMin:e.readInt32(),xMax:e.readInt32(),yMax:e.readInt32()}),"box2f"==t.type&&(t.values={xMin:e.readFloat32(),yMin:e.readFloat32(),xMax:e.readFloat32(),yMax:e.readFloat32()}),"chlist"==t.type){for(t.values=[];0!=e.peekUint8();){let i=e.readString(),n=e.readInt32(),a=e.readUint8();e.skip(3);let s={name:i,pixelType:n,pLinear:a,xSampling:e.readInt32(),ySampling:e.readInt32()};t.values.push(s)}e.skip()}if("chromaticities"==t.type&&(t.values={redX:e.readFloat32(),redY:e.readFloat32(),greenX:e.readFloat32(),greenY:e.readFloat32(),blueX:e.readFloat32(),blueY:e.readFloat32(),whiteX:e.readFloat32(),whiteY:e.readFloat32()}),"compression"==t.type&&(t.value=e.readUint8()),t.type,t.type,"float"==t.type&&(t.value=e.readFloat32()),"int"==t.type&&(t.value=e.readUint32()),t.type,"lineOrder"==t.type&&(t.value=e.readUint8()),t.type,"m44f"==t.type){t.values=[];for(let i=0;i<4;i++)for(let i=0;i<4;i++)t.values.push(e.readFloat32())}return t.type,t.type,t.type,t.type,t.type,t.type,"v2i"==t.type&&(t.values={x:e.readInt32(),y:e.readInt32()}),"v2f"==t.type&&(t.values={x:e.readFloat32(),y:e.readFloat32()}),t.type,t.type,t}toFloatArray(){let e=new Float32Array(new ArrayBuffer(this.dimensions.w*this.dimensions.h*4*4));const t={R:0,G:1,B:2,A:3};let i=this.attributes.channels.values;for(let n=0;n<this.dimensions.h;n++)for(let a=0;a<this.dimensions.w;a++){let s=4*(n*this.dimensions.w+a);for(let o=0;o<i.length;o++){let r=i[o];const l=r.name;let d=this.channelOffsets[o],c=1==r.pixelType?2:4,h=(n*this.pixelSize+d)*this.dimensions.w+a*c,u=0;u=0==r.pixelType?this.outputBuffer.getUint32():1==r.pixelType?this.outputBuffer.getFloat16(h):this.outputBuffer.getFloat32(h),e[s+t[`${l}`]]=u}e[s+t.A]=1}return e}}class I{buffer;data;type;dimensions={w:0,h:0};scaleEndianess;littleEndian;constructor(e){this.buffer=new w(e),this.type=this.buffer.readLine();const t=this.buffer.readLine().split(" ");this.dimensions={w:parseInt(t[0],10),h:parseInt(t[1],10)},this.scaleEndianess=parseFloat(this.buffer.readLine()),this.littleEndian=this.scaleEndianess<0,this.buffer.littleEndian=this.littleEndian;if(this.data=new Float32Array(new ArrayBuffer(this.dimensions.w*this.dimensions.h*4*4)),"PF"===this.type)for(let e=0;e<this.dimensions.h;e++)for(let t=0;t<this.dimensions.w;t++){const i=4*((this.dimensions.h-e-1)*this.dimensions.w+t);this.data[i+0]=this.buffer.readFloat32(),this.data[i+1]=this.buffer.readFloat32(),this.data[i+2]=this.buffer.readFloat32(),this.data[i+3]=1}else if("PF4"===this.type)for(let e=0;e<this.dimensions.h;e++)for(let t=0;t<this.dimensions.w;t++){const i=4*((this.dimensions.h-e-1)*this.dimensions.w+t);this.data[i+0]=this.buffer.readFloat32(),this.data[i+1]=this.buffer.readFloat32(),this.data[i+2]=this.buffer.readFloat32(),this.data[i+3]=this.buffer.readFloat32()}else for(let e=0;e<this.dimensions.h;e++)for(let t=0;t<this.dimensions.w;t++){const i=4*((this.dimensions.h-e-1)*this.dimensions.w+t),n=this.buffer.readFloat32();this.data[i+0]=n,this.data[i+1]=n,this.data[i+2]=n,this.data[i+3]=1}}toFloatArray(){return this.data}}const T=(e,t)=>{let i=e.byteLength>>2;for(var n=0;n<i;n+=1)t[n]=255*e[n];return t};function P(e,t){if(!e||!t)return t;t.width=e.dimensions.w,t.height=e.dimensions.h;const i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height);return T(e.toFloatArray(),n.data),i.putImageData(n,0,0),t}const F=(e="",t="")=>new Promise(((i,n)=>{(e=>fetch(e).then((e=>e.blob())))(e).then((e=>{const a=new FileReader;a.onload=()=>i("pfm"===t?new I(a.result):new _(a.result)),a.onerror=()=>n("Could not read media"),a.readAsArrayBuffer(e)})).catch((()=>n("Could not read media")))}));const A=(e,t,i)=>"data:"===e.slice(0,5)?x(e,t,i):new Promise(((t,n)=>{(function(e,t,i){return new Promise(((n,a)=>{F(t,i).then((a=>(e.fileData=a,e.ext=i,e.src=t,P(a,e),n(e)))).catch(a)}))})(document.createElement("canvas"),e,i).then((e=>{t({metadata:{fps:0,duration:0,hasAudio:!1,timestamps:[],width:e.width,height:e.height,codec:i,bitrate:0},element:e})})).catch((e=>n(e)))})),R=(e,t)=>fetch(t).then((e=>e.blob())).then((t=>new File([t],e)));function G(e=0){if(0===e)return 0;const t=+(1/Math.round(e)).toFixed(6);return Number.isFinite(t)?t:0}const B=e=>Math.trunc(1e3*e)/1e3,V=(e,t)=>{const i=G(t);return Math.round(e/i)*i},N=(e,t,i)=>{const n=.1/i,a=t<0,s=Math.abs(B(t));if(!e||!e.length)return s;let o=0;for(;o<e.length;){const t=e[Number(o)];if(t+n>=s)return a?-t:t;o+=1}return a?-s:s};const D=(e,t)=>`Error loading ${e}${t&&t.indexOf("NOT_SUPPORTED")>-1?", unsupported codec":""}`;function O(e,t,i){return new Promise(((n,a)=>{const s=window.IcatMediaInfo,o=document.createElement("video"),r={fps:0,duration:0,hasAudio:!1,width:0,height:0,timestamps:[],codec:"",bitrate:0};let d=!1;const c=e=>{r.duration=e.duration,r.fps=Math.ceil(e.fps),r.hasAudio=e.hasAudio,r.width=e.width,r.height=e.height,r.timestamps=e.frameTimes.slice(),r.codec=e.codec,r.bitrate=e.bitrate,0===r.timestamps.length&&(r.timestamps=function(e,t){const i=[];if(!e)return i;const n=1/(t||30);if(!Number.isNaN(n)&&Number.isFinite(n)){const t=Math.ceil(e/n);let a=0;i.push(a);let s=1;for(;s<=t;)a+=n,i.push(a),s+=1}return i.map((e=>B(e)))}(r.duration,r.fps)),e=null,n({element:o,metadata:r})},h=()=>{d=!0;const i=D(t.path||e,o.error?o.error.message:void 0);o.oncanplaythrough=null,o.onerror=null,o.src="",a(i)},u=async()=>{if(d)return;if(d=!0,o.oncanplaythrough=null,o.onerror=null,t.duration&&t.fps)return r.duration=t.duration,r.fps=Math.ceil(t.fps),r.hasAudio=t.hasAudio,r.width=t.width,r.height=t.height,r.timestamps=t.timestamps,r.codec=t.codec,r.bitrate=t.bitrate,void n({element:o,metadata:r});let a=i||t.file;if(!a&&e&&"string"==typeof e)try{a=await R(t.name,e)}catch(e){return h()}try{s(a).then(c)}catch(e){h()}},m=()=>{if(d)return;const{width:e,height:t}={width:o.videoWidth||o.width,height:o.videoHeight||o.height};if(4===o.readyState&&e&&t)return u();requestAnimationFrame(m)};o.oncanplaythrough=u,o.onerror=h,o.muted=!0,o.currentTime=0,o.playsInline=!0,o.preload="auto",o.src=l.getUrl(i,e);try{o.load()}catch(e){console.warn(e)}m()}))}function H(e,t,i){let n=e.src;return new Promise(((a,s)=>{i(n).then((e=>{n=e})).then((()=>{const i=t=>(e.codec=t.metadata.codec,e.bitrate=t.metadata.bitrate,e.duration=t.metadata.duration,e.fps=t.metadata.fps,e.hasAudio=t.metadata.hasAudio,e.height=t.metadata.height,e.timestamps=t.metadata.timestamps,e.width=t.metadata.width,{media:e,element:t.element});"video"===e.type?O(n,e,t).then((e=>a(i(e)))).catch((e=>{console.warn(e),s(e)})):"image"===e.type?x(n,e.path,e.extension).then((e=>a(i(e)))).catch((e=>{console.warn(e),s(e)})):"hdrimage"===e.type?A(n,e.path,e.extension).then((e=>a(i(e)))).catch((e=>{console.warn(e),s(e)})):s("Invalid media")})).catch(s)}))}function $(e){return!(!0!==e&&"true"!==e)}const U=(e,t,i=void 0)=>{const n=e=>null==e;if(0===t.length||n(e))return i;let a,s=e,o=0;for(;o<t.length;){const e=t[Number(o)];if(a=s["number"==typeof e?Number(e):`${e}`],n(a))return i;s=a,o+=1}return n(a)?i:a};function W(e){return Object.prototype.toString.call(e).slice(8,-1)}const K=["Boolean","Number","String","Error","Date"];function q(e){const t=e.constructor,i=W(e);return K.indexOf(i)>-1?new t(e):"RegExp"===i?function(e){const t=/\w*$/,i=new e.constructor(e.source,t.exec(e));return i.lastIndex=e.lastIndex,i}(e):"Symbol"===i?function(e){return Object(Symbol.prototype.valueOf.call(e))}(e):"Function"===i?e:null}function Z(e,t){if(!e)return;let i=0;const n=U(e,["length"],0);for(;i<n;)t(e[Number(i)],i),i+=1;return e}function Y(e){if("object"!=typeof e||null===e)return e;const t=W(e);let i=null;return"Set"!==t&&"Map"!==t&&"Array"!==t&&"Object"!==t?q(e):"Set"===t?(i=new Set,e.forEach((e=>{i.add(Y(e))})),i):"Map"===t?(i=new Map,e.forEach(((e,t)=>{i.set(t,Y(e))})),i):("Array"===t&&(i=[],Z(e,((e,t)=>{i[Number(t)]=Y(e)}))),"Object"===t&&(i={},Z(Object.keys(e),(t=>{i[`${t}`]=Y(e[`${t}`])}))),i)}function X(e){return`00${e}`.slice(-2)}function J(e,t){if(0===t||0===e)return"00:00";const i=Math.ceil(t),n=Math.max(0,Math.round(e*t)),a=n%i,s=(n-a)/i%60,o=Math.floor(e/60),r=Math.floor(e/3600);return`${r>0?`${X(r)}:`:""}${o>0?`${X(o)}:`:""}${X(s)}.${X(Number.isNaN(a)?0:a)}`}function Q(e,t,i,n,a,s){const o=U(t,["fileData"]);o&&e.getExtension("OES_texture_float_linear");const r=o?o.toFloatArray():t;let l,d=e.createTexture();e.bindTexture(e.TEXTURE_2D,d),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o?e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,a,s,0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a,s,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,d);const c=()=>{(e=>{if(!e)return!1;if("IMG"===e.tagName){const t=e;return t.complete&&0!==t.naturalHeight}if("VIDEO"===e.tagName){const t=e;return 4===t.readyState&&0!==t.videoHeight}if("CANVAS"===e.tagName)return 0!==e.height;return!1})(t)&&(o?e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,a,s,0,e.RGBA,e.FLOAT,r):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r))};c();const h={width:a,height:s,element:t,use(){e.useProgram(n),e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,d),c();const t=e.getUniformLocation(n,`uTexture${i}`);return t&&e.uniform1i(t,i),h.draw(),h},draw(){const t=e.createFramebuffer();return t?(l=t,e.bindFramebuffer(e.FRAMEBUFFER,l),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,d,0),e.viewport(0,0,h.width,h.height),e.bindFramebuffer(e.FRAMEBUFFER,null),h):h},dispose(){e.deleteTexture(d),l&&e.deleteFramebuffer(l),d=null}};return h}function ee(e,t,i=0,n=0){const a=(t,i)=>{const n=e.createShader(t);if(n){if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error(`Shader compile: ${e.getShaderInfoLog(n)}`);return n}};let s=()=>{},o=0,r=0,l=0;const d=Date.now();let c=null,h=null,u=null,m=null,p=e.createProgram();if(!p)return null;const g=a(e.VERTEX_SHADER,"#version 300 es\nprecision highp float;\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\nout vec2 vTextureCoord;\nvoid main()\n{\n    gl_Position = vec4(aVertexPosition, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}");g&&e.attachShader(p,g);const b=a(e.FRAGMENT_SHADER,t);if(b&&e.attachShader(p,b),e.linkProgram(p),!e.getProgramParameter(p,e.LINK_STATUS))throw new Error(`Shader program: ${e.getProgramInfoLog(p)}`);const v=e.getUniformLocation(p,"uDimensions"),f=e.getUniformLocation(p,"uTime"),y=e.getUniformLocation(p,"uMouse"),x=()=>{l=1},w=()=>{l=0},k=t=>{const i=e.canvas.getBoundingClientRect();o=t.clientX-i.left,r=t.clientY-i.top};y&&(s=()=>{e.canvas.removeEventListener("mousedown",x),e.canvas.removeEventListener("mouseup",w),e.canvas.removeEventListener("mouseleave",w),e.canvas.removeEventListener("mousemove",k)},e.canvas.addEventListener("mousedown",x),e.canvas.addEventListener("mouseup",w),e.canvas.addEventListener("mouseleave",w),e.canvas.addEventListener("mousemove",k));const z={width:i,height:n,constantRender:!!y||!!f,program:p,draw(){p&&(null==c&&(c=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),e.STATIC_DRAW),null==h&&(h=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),e.STATIC_DRAW)),null==u&&(u=e.getAttribLocation(p,"aVertexPosition"),e.enableVertexAttribArray(u)),null==m&&(m=e.getAttribLocation(p,"aTextureCoord"),e.enableVertexAttribArray(m)),e.useProgram(p),e.bindBuffer(e.ARRAY_BUFFER,c),e.vertexAttribPointer(u,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,h),e.vertexAttribPointer(m,2,e.FLOAT,!1,0,0),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.drawArrays(e.TRIANGLE_STRIP,0,4))},setUniforms(t={}){if(!p)return;e.useProgram(p);const i=U(t,["gamma","value"],1),n=U(t,["exposure","value"],1),a=e.getUniformLocation(p,"uTonemapper");return 1!==i||1!==n?(e.uniform1i(a,0),e.uniform1f(e.getUniformLocation(p,"uGamma"),i),e.uniform1f(e.getUniformLocation(p,"uExposure"),n)):e.uniform1i(a,-1),v&&e.uniform2f(v,z.width,z.height),y&&e.uniform4f(y,o,r,l,0),f&&e.uniform1f(f,(Date.now()-d)/1e3),Object.keys(t).forEach((i=>{if("exposure"===i||"game"===i)return;const n=t[`${i}`],a=n.type,s=n.value,o=e.getUniformLocation(p,i);"bool"===a&&e.uniform1i(o,s?1:0),"int"===a&&e.uniform1i(o,s),"float"===a&&e.uniform1f(o,s),"dropdown"===a&&e.uniform1i(o,s)})),z},dispose(){e.deleteProgram(p),p=null,s()}};return z}function te(e,t){if(!Number.isNaN(e)&&Number.isFinite(e)&&"string"!=typeof e)return e;const i=parseFloat(e);return Number.isNaN(i)||!Number.isFinite(i)||"string"==typeof i?t:i}const ie=e=>({width:e.videoWidth||e.naturalWidth||e.width,height:e.videoHeight||e.naturalHeight||e.height});class ne{canvas;container;contentContainer;ctx;t=!1;get displayRenderMode(){return this.t}set displayRenderMode(e){this.t=$(e),this.t?this.renderModeText.style.removeProperty("display"):this.renderModeText.style.display="none"}i=!1;get displayInfoText(){return this.i}set displayInfoText(e){this.i=$(e),this.i?this.textContainer.style.removeProperty("display"):this.textContainer.style.display="none"}disposed=!1;eventListeners={};id="";index=0;overlayElement;renderMode="auto";shader;shaderSettings={};shaderSource="";sourceElement;textures=[];type;x=0;y=0;z=100;width=0;height=0;globalPosition={x:0,y:0,z:1};renderModeText;infoTextContainer;textContainer;visible=!0;hasFrameImages=!1;frameElement;o=!1;get showFrameImage(){return this.o}set showFrameImage(e){const t=this.o!==e;this.o=e,t&&"webgl"===this.renderMode&&this.createWebGlTextures()}drawingFrameImage;showFilter=!0;l="";u=0;m;p;v;k;static webGPUVertexShaderSource="\n    struct VertexOutput {\n      @builtin(position) Position: vec4<f32>,\n      @location(0) uv: vec2<f32>,\n    }\n\n    @vertex\n    fn vert_main(@builtin(vertex_index) VertexIndex: u32) -> VertexOutput {\n      var pos = array<vec2<f32>, 6>(\n        vec2<f32>( 1.0,  1.0),\n        vec2<f32>( 1.0, -1.0),\n        vec2<f32>(-1.0, -1.0),\n        vec2<f32>( 1.0,  1.0),\n        vec2<f32>(-1.0, -1.0),\n        vec2<f32>(-1.0,  1.0)\n      );\n\n      var uv = array<vec2<f32>, 6>(\n        vec2<f32>(1.0, 0.0),\n        vec2<f32>(1.0, 1.0),\n        vec2<f32>(0.0, 1.0),\n        vec2<f32>(1.0, 0.0),\n        vec2<f32>(0.0, 1.0),\n        vec2<f32>(0.0, 0.0)\n      );\n\n      var output : VertexOutput;\n      output.Position = vec4<f32>(pos[VertexIndex], 0.0, 1.0);\n      output.uv = uv[VertexIndex];\n      return output;\n    }\n";static webGPUfragmentShaderSource="\n        @group(0) @binding(1) var mySampler: sampler;\n        @group(0) @binding(2) var myTexture: texture_external;\n\n        @fragment\n        fn frag_main(@location(0) uv : vec2<f32>) -> @location(0) vec4<f32> {\n            return textureSampleBaseClampToEdge(myTexture, mySampler, uv);\n        }\n    ";static webGLFragmentShader="#version 300 es\nprecision highp float;\nin vec2 vTextureCoord;\nuniform sampler2D uTexture0;\nuniform int uTonemapper;\nuniform float uGamm... (697 KB left)
